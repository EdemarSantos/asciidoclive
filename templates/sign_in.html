{# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
 #                         Copyright (C) 2014 Chuan Ji                         #
 #                             All Rights Reserved                             #
 # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
 # Sign-in window. #}


{# Renders a sign-in button for the given provider.
 # Args:
 #   - name: the account provider identifier.
 #   - icon_name: FontAwesome icon name.
 #   - title: title to display for the button.
 #}
{% macro SignInButton(name, icon_name, title) %}
  <a href="#"
    data-account-provider-type="{{ name }}"  {# For Dart. #}
    class="sign-in-button sign-in-button-{{ name }}">
    <table><tr>
      <td class="icon"><span class="fa {{ icon_name }} fa-lg"></span></td>
      <td class="title">{{ title }}</td>
    </tr></table>
  </a>
{% endmacro %}


{# Sign-in window. #}


{# Overlay window that dims the normal page. Used during sign-in. #}
<div id="overlay" {# class="hidden" #}>&nbsp;</div>
{# Sign in window. #}
<div id="sign-in-window-wrapper-1"><div id="sign-in-window-wrapper-2">
  <div id="sign-in-window">
    <div class="header">
      <img src="{{ url_for('static', filename='logo.png') }}">
    </div>
    <div class="body">
      <div class="prompt">Sign in with...</div>
      {{ SignInButton('facebook', 'fa-facebook', 'Facebook') }}
      {{ SignInButton('google', 'fa-google', 'Google') }}
      {{ SignInButton('twitter', 'fa-twitter', 'Twitter') }}
      {{ SignInButton('linkedin', 'fa-linkedin', 'LinkedIn') }}
    </div>
  </div>
</div></div>

{# Facebook JavaScript SDK. #}
<div id="fb-root"></div>
<script>
  // The default fbAsyncInit function appears to conflict with Google's
  // sign-in. Instead, we change our init function to just set a flag
  // and we will call FB.init() from Dart.
  window.isFbJsSdkLoaded = false;
  window.fbAsyncInit = function() { window.isFbJsSdkLoaded = true; };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
